C51 COMPILER V9.57.0.0   DS1302                                                            09/18/2025 22:51:42 PAGE 1   


C51 COMPILER V9.57.0.0, COMPILATION OF MODULE DS1302
OBJECT MODULE PLACED IN .\Objects\Ds1302.obj
COMPILER INVOKED BY: D:\Keil_v5\C51\BIN\C51.EXE Ds1302.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\Ds
                    -1302.lst) OBJECT(.\Objects\Ds1302.obj)

line level    source

   1          #include <REGX52.H>
   2          
   3          
   4          sbit DS1302_SCLK = P3^6;
   5          sbit DS1302_IO = P3^4;
   6          sbit DS1302_CE = P3^5;
   7          
   8          void DS1302_Init()
   9          {
  10   1              DS1302_CE = 0;
  11   1              DS1302_SCLK = 0;
  12   1      }
  13          
  14          void DS1302_Write(unsigned char Command,Data)
  15          {
  16   1              unsigned char i = 0;
  17   1              DS1302_CE = 1;
  18   1              for(i=0;i<8;i++)
  19   1              {
  20   2                      DS1302_IO = Command & (0x01<<i);
  21   2                      DS1302_SCLK = 1;
  22   2                      DS1302_SCLK = 0;
  23   2              }
  24   1              for(i=0;i<8;i++)
  25   1              {
  26   2                      DS1302_IO = Data & (0x01<<i);
  27   2                      DS1302_SCLK = 1;
  28   2                      DS1302_SCLK = 0;
  29   2              }
  30   1              DS1302_CE = 0;
  31   1      }
  32          
  33          unsigned char DS1302_Read(unsigned char Command)
  34          {
  35   1              unsigned char i = 0;
  36   1              unsigned char Data =0; 
  37   1              DS1302_CE = 1;
  38   1              for(i=0;i<8;i++)
  39   1              {
  40   2                      DS1302_IO = Command & (0x01<<i);
  41   2                      DS1302_SCLK = 0;
  42   2                      DS1302_SCLK = 1;
  43   2              }
  44   1              for(i=0;i<8;i++)
  45   1              {
  46   2                      DS1302_SCLK = 1;
  47   2                      DS1302_SCLK = 0;
  48   2                      if(DS1302_IO) Data |= (0x01<<i);
  49   2              }
  50   1              DS1302_CE = 0;
  51   1              DS1302_IO = 0;
  52   1              return Data;
  53   1      }
  54          
C51 COMPILER V9.57.0.0   DS1302                                                            09/18/2025 22:51:42 PAGE 2   

  55          void DS1302_WriteByte(unsigned char Command,Data)
  56          {
  57   1              DS1302_Write(0x8e,0x00);
  58   1              DS1302_Write(Command,Data);
  59   1              DS1302_Write(0x8e,0x80);
  60   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    199    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----       4
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
